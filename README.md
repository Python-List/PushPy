[![Foo](http://img407.imageshack.us/img407/8403/logoasaf.jpg)](http://google.com.au/)

# Pushpy 1.0

Pushpy is a push notification server based on Python. It's composed by a users database to store users token ( and more information that the server owner wants ), a web interface with Google Login to send notifications using a web platform. The Google emails accounts allowed to send notifications are stored in another database

## Technologies
* **Flask Microframework**: The Python Framework used to the web user interface.
* **Python**: For the entire backend. Is a general-purpose, high-level programming language whose design philosophy emphasizes code readability.
* **Flask-WTF**:Flask-WTF offers simple integration with WTForms. This integration includes optional CSRF handling for greater security.
* **Flask-Logins**:Flask-Login provides user session management for Flask. It handles the common tasks of logging in, logging out, and remembering your usersâ€™ sessions over extended periods of time.

## Prerequisites
Ensure evereything bellow is installed. Otherwise PushPy won't work propertly.

* Python
* MySQL or SQLite
* Flask:
> 	pip install Flask
* Flask-WTF:
>	pip install Flask-WTF
* Flask-Login
>	pip install flask-login
* Flask-OpenID
>	pip install flask-openid
* Flask-SQLAlchemy
>	pip install flask-sqlalchemy

## Setup
Inside /app folder you'll finde a file called config.py .  This file contains all configuration of Pushpy. The parameters you have to setup are:

Related with DB configuration:
> dbhost= 'localhost'   

> dbuser= 'root' 
> 
> dbpass= ''
> 
> dbname= ''

You have two lines to setup PushPy to works with SQLite or with MySQL.

**Note: Remember to create database and specify its name in dbname**

Then you have to config **CSFR_ENABLED** and **SECRET_KEY**. Both parameters are related with Flask-WTF. You'll find information about them here: [http://pythonhosted.org/Flask-WTF/](http://)
> CSRF_ENABLED = True
> 
> SECRET_KEY = ''
> 
> basedir = os.path.abspath(os.path.dirname(__file__))
> 
> OPENID_PROVIDERS = [
>     { 'name': 'Google', 'url': 'https://www.google.com/accounts/o8/id' }]

The last one OPENID_PROVIDERS has all providers allowed for openID login. Pushpy is designed to works with Google accounts but take a look at OpenID, you can add more openID providers. [http://openid.net/get-an-openid/](http://)

### Generate push certificate
For sending notifications you need a certificated generated by the App Dev Center. If you don't know how to generate it please follow this tutorial:

[https://code.google.com/p/apns-php/wiki/CertificateCreation](http://)

I called both dev.pem and dist.pem ( development and production certificates ). Please, put both in root PushPy folder

**In push.py you have to choose what file use dev.pem or dist.pem and what APN server depending if you are working in development mode or distribution mode**

## Run
If everything is ok run server:
> python server.py

Then enter to the url bellow and a Login page will appear. Login with your Google account and if it's on the database as allowed you'll enter to the Send Notifications page.

[http://127.0.0.1:5000/pushpy/push
](http://)

The rest is explained in the page

[![Foo](http://img43.imageshack.us/img43/3857/capturadepantalla201303n.png)](http://google.com.au/)

## Pending changes
Option to choose dev or dist in web form.

SQLite database by default.


